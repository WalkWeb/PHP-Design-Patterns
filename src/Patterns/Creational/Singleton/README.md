
# Singleton

Паттерн синглтон это класс, который написан таким образом, чтобы сколько раз не создавай от него объектов - 
будет создан объект в одном единственном экземпляре. Т.е. при первом вызове будет создан объект, а при последующих будет
возвращаться ссылка на уже созданный ранее.

## Применение

Классическое применение синглтона - это объект подключения к базе - если создавать подключение к базе обычным объектом, 
то на каждое создание такого объекта будет создаваться отдельное подключение. Что, банально, может привести к ошибке 
«User has already more than max active connections»

Также применяется в любых ситуациях, где у нас создается большой и сложный объект, который используется в разных частях 
программы (в middleware, в контроллере, в моделях), при этом нам критична производительность, и создавать объект каждый
раз с нуля (а при создании, к примеру, делается 20 запросов в базу) слишком накладно.

## Недостатки

Вообще синглтон также считается и антипаттерном, потому что его очень сложно покрыть unit-тестами. Как не сложно 
догадаться - состояние объекта из одного теста будет переходить в другой тест, хотя удобнее писать тесты так, чтобы
объекты собирались каждый раз с нуля.

Решение - использовать паттерн контейнер или [контейнер внедрения зависимостей](https://github.com/WalkWeb/PHP-Design-Patterns/tree/master/src/Patterns/Other/DIContainer)
